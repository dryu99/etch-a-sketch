<!DOCTYPE html>

<html>

<head>
    <title>Etch-a-Sketch</title>
    <link href="./style.css" rel="stylesheet" type="text/css">
</head>

<body>
    <button id="clear-btn">Clear Grid</button>
    <button id="size-btn">Change Size</button>
    <div class="grid-container"></div>

    <script>

        function changeColour(e) {
            e.target.classList.add("colourful");
        }

        // EFFECTS: updates grid size with user prompted value
        function updateGrid(e) {            

            let i = gridDiv.childElementCount;
            while (i--) {
                gridDiv.childNodes[i].remove();
            }

            let newSquareNum;
            do {
                newSquareNum = prompt("How many squares per side should the new grid have?");
            } while (newSquareNum <= 0 || isNaN(Number(newSquareNum)));

            for (let i = 0, n = Math.pow(newSquareNum, 2); i < n; i++) {
                const cellDiv = document.createElement("div");                
                cellDiv.classList.add("cell");
                cellDiv.addEventListener("mouseover", changeColour);

                gridDiv.appendChild(cellDiv);
            }

            gridDiv.style.gridTemplateColumns = `repeat(${newSquareNum}, ${newSquareNum}fr)`;             
            
        }

        function clearGrid() {
            gridDiv.childNodes.forEach(cell => {
                cell.classList.remove("colourful");
            });
        }

        const gridDiv = document.querySelector(".grid-container");
        const clearButton = document.querySelector("#clear-btn");
        const sizeButton = document.querySelector("#size-btn");
        clearButton.addEventListener("click", clearGrid);
        sizeButton.addEventListener("click", updateGrid);

        for (let i = 0; i < 16; i++) {
            const cellDiv = document.createElement("div");
            cellDiv.classList.add("cell");

            cellDiv.addEventListener("mouseover", changeColour);
            gridDiv.appendChild(cellDiv);
        }



    </script>
</body>

</html>